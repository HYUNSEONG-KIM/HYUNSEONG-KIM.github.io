---
layout: post
title: 히스토그램
parent: GSL 과학계산 라이브러리
grand_parent: Books
nav_order: 27
use_math: true
---

GSL
{: .label }
C
{: .label .label-grey}
Kor
{: label .label-blue}
Writing
{: .label .label-red}

1. TOC
{:toc}


이 단원에서는 히스토그램을 만드는 함수들을 기술합니다. 히스토그램은 주어진 데이터들의 분포를 요약해 보기에 매우 편리한 방법입니다. 히스토그램은 여러 개의 구간(bin)으로 나누어 각각의 구간은 구간에 속한 연속 변수 $x$에서의 발생하는 사건의 수를 측정합니다. GSL에서는 이러한 히스토그램의 구간을 부동 소수점 숫자로 포함합니다. 따라서 정수와 비정수 분포를 모두 이용할 수 있습니다. 이러한 구간(bin)은 임의의 무작위 구간 길이 집합을 사용할 수 있습니다. (기본적으로 모든 구간의 길이가 같다고 설정되어 있습니다.) 이 라이브러리는 1, 2차원 히스토그램을 지원합니다.

히스토그램을 만들면, 이를 확률 분포 함수로 변환할 수도 잇습니다. 라이브러리에서는 확률 분포로부터 효율적으로 무작위 표본을 뽑아낼 수 있는 방법을 제공하비다. 이는 실제 값들로 부터 시뮬레이션을 만들어낼 때 유용하게 쓸 수 있습니다.

여기에 기술된 함수들은 헤더파일 `gsl_histogram.h`과 `gsl_histogram2d.h`에 기술되어 있습니다.

## 히스토그램의 구조

히스토그램은 다음과 같은 구조체로 정의됩니다.

---
**gsl_histogram**

---

     typedef struct {
        size_t n ;
        double * range ;
        double * bin ;
     } gsl_histogram ;

|변수|설명|
|--|--|
|`size_t n`|히스토그램의 구간(bin)의 숫자를 나타냅니다.|
|`double * range`|`n+1`개의 원소를 가지는 배열의 주소를 담는 포인터로 구간(bin)의 범위(range)를 나타냅니다. |
|`double * bin`|각 구간의 값을 저장하는 `n` 크기의 배열을 가르키는 포인터입니다. `bin`이 부동 소수로 정의되어 있기 때문에 필요시 비 정수로 확장할 수 있습니다.|

`bin[i]`의 범위는 `range[i]`에서 `range[i+1]`까지입니다. $n$개의 구간의 대해 `range`가 `n+1` 크기의 배열로 정의된 이유입니다. 각각의 구간은 하한에 포함되고, 상한은 포함되지 않습니다. 수학적으로 이 의미는 구간(bin)이 다음과 같은 부등식으로 정의된다는 뜻입니다.


$$\text{bin}[i] \text{ corresponds to range}[i] \le x < \text{range}[i+1]$$


다음 다이어그램은 $x$ 축 위에서 범위와 구간의 관계를 보여줍니다.

<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="p">[</span> <span class="nb">bin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)[</span> <span class="nb">bin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)[</span> <span class="nb">bin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)[</span> <span class="nb">bin</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)[</span> <span class="nb">bin</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">)</span>
<span class="o">---|---------|---------|---------|---------|---------|---</span>  <span class="n">x</span>
 <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>      <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>      <span class="n">r</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>      <span class="n">r</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>      <span class="n">r</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>      <span class="n">r</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>

이 그림에서 `range` 배열의 값은 $r$로 표기되었습니다. 각각의 `bin`의 왼쪽의 대괄호는 `[`,  $r \le x$를 의미하며, 오른쪽의 `)`은 $x < r$을 의미합니다. 따라서 히스토그램의 구간 끝의 표본은 모두 제외됩니다. 마지막 구간에 이 값을 포함하려면 추가로 구간을 1개 더 넣어야합니다.

이러한 `gsl_histogram` 구조체와 관련 함수들은 헤더 파일 `gsl_gistogram.h`에 정의되어 있습니다.

## 히스토그램 할당

히스토그램을 메모리에 할당하는 함수들은 `malloc()`과 `free()`의 형식을 따릅니다. 여기에 더해 별도의 오류 검사기능을 추가로 수행합니다. 만약, 히스토그램을  메모리에 할당할 수 없다면, 함수는 오류 관리자를 호출하고(`GSL_ENOMEM`을 반환합니다.) 함수에서는 `NULL` 포인터를 반환합니다. 따라서, 라이브러리의 오류 관리 함수를 사용해 프로그램을 멈추려고 한다면, 모든 히스토그램의 `alloc`을 검사할 필요가 없습니다.

---

gsl_gistogram * **gsl_gistogram_alloc** (size_t *n*)

---

이 함수는 `n`개의 구간을 가지는 히스토그램을 메모리에 할당하고 만들어진 `gsl_histogram` 구조체의 주소를 반환합니다.

